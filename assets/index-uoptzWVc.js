(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();const c=["white","black","blue","red"];class h{constructor(e,s,o,t){this.squares=new Array,this.selectedColor=c[0],this.isPanning=!1,this.offsetX=0,this.offSetY=0,this.startX=0,this.startY=0,this.viewBox="0 0 100 100",this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.appendChild(this.svgElement),this.svgElement.setAttribute("width",s.toString()),this.svgElement.setAttribute("height",o.toString()),this.gridSize=t,this.viewBox=`0 0 ${s} ${o}`,this.svgElement.setAttribute("viewBox",this.viewBox),this.svgElement.style.border="1px solid black",this.colorPicker=document.createElement("div"),this.colorPicker.classList.add("color-picker-container");for(const i of c){const n=document.createElement("div");n.classList.add("color-square"),n.style.backgroundColor=i,console.log(i),n.addEventListener("onclick",()=>{this.selectedColor=i,console.log(this.selectedColor)}),this.colorPicker.appendChild(n)}e.appendChild(this.colorPicker),this.addEventListeners()}addEventListeners(){this.svgElement.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.svgElement.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.svgElement.addEventListener("mouseup",e=>this.handleMouseUp(e)),this.svgElement.addEventListener("contextmenu",e=>e.preventDefault())}handleMouseDown(e){if(e.button===2){this.svgElement.style.cursor="grab",this.isPanning=!0;const s=this.svgElement.getBoundingClientRect();this.startX=e.clientX-s.left,this.startY=e.clientY-s.top}else{const s=this.svgElement.getBoundingClientRect(),o=e.clientX-s.left+this.offsetX,t=e.clientY-s.top+this.offSetY;for(const l of this.squares)if(d(l,o,t)){l.setAttribute("fill","red");return}const i=Math.floor(o/this.gridSize),n=Math.floor(t/this.gridSize);console.log(i,n),this.addNewSquare(i*this.gridSize,n*this.gridSize,this.gridSize)}}handleMouseMove(e){if(this.isPanning){console.log("edit panning");const s=this.svgElement.getBoundingClientRect(),o=e.clientX-s.left-this.startX,t=e.clientY-s.top-this.startY;this.viewBox=`${this.offsetX-o} ${this.offSetY-t} ${s.width} ${s.height}`,this.svgElement.setAttribute("viewBox",this.viewBox)}}handleMouseUp(e){if(this.svgElement.style.cursor="default",this.isPanning){const s=this.svgElement.getBoundingClientRect(),o=e.clientX-s.left-this.startX,t=e.clientY-s.top-this.startY;this.offsetX-=o,this.offSetY-=t,this.isPanning=!1,this.viewBox=`${this.offsetX} ${this.offSetY} ${s.width} ${s.height}`,this.svgElement.setAttribute("viewBox",this.viewBox)}}addNewSquare(e,s,o){const t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("x",`${e}`),t.setAttribute("y",`${s}`),t.setAttribute("width",`${o}`),t.setAttribute("height",`${o}`),t.setAttribute("fill","blue"),t.setAttribute("stroke","black"),this.svgElement.appendChild(t),this.squares.push(t)}}function d(r,e,s){const o=parseInt(r.getAttribute("x")||"0"),t=parseInt(r.getAttribute("y")||"0"),i=parseInt(r.getAttribute("width")||"0"),n=parseInt(r.getAttribute("height")||"0");return o<=e&&e<=o+i&&t<=s&&s<=t+n}new h(document.body,300,300,30);
